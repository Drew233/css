 var stop, staticx; var img = new Image(); img.src = "data:image/png;base64,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"; function Sakura(x, y, s, r, fn) { this.x = x; this.y = y; this.s = s; this.r = r; this.fn = fn; }
Sakura.prototype.draw = function (cxt) {
    cxt.save(); var xc = 10 * this.s / 10; cxt.translate(this.x, this.y); cxt.rotate(this.r); cxt.drawImage(img, 0, 0, 30 * this.s, 30 * this.s)
    cxt.restore();
}
Sakura.prototype.update = function () { this.x = this.fn.x(this.x, this.y); this.y = this.fn.y(this.y, this.y); this.r = this.fn.r(this.r); if (this.x > window.innerWidth || this.x < 0 || this.y > window.innerHeight || this.y < 0) { this.r = getRandom('fnr'); if (Math.random() > 0.4) { this.x = getRandom('x'); this.y = 0; this.s = getRandom('s'); this.r = getRandom('r'); } else { this.x = window.innerWidth; this.y = getRandom('y'); this.s = getRandom('s'); this.r = getRandom('r'); } } }
SakuraList = function () { this.list = []; }
SakuraList.prototype.push = function (sakura) { this.list.push(sakura); }
SakuraList.prototype.update = function () { for (var i = 0, len = this.list.length; i < len; i++) { this.list[i].update(); } }
SakuraList.prototype.draw = function (cxt) { for (var i = 0, len = this.list.length; i < len; i++) { this.list[i].draw(cxt); } }
SakuraList.prototype.get = function (i) { return this.list[i]; }
SakuraList.prototype.size = function () { return this.list.length; }
function getRandom(option) {
    var ret, random; switch (option) {
        case 'x': ret = Math.random() * window.innerWidth; break; case 'y': ret = Math.random() * window.innerHeight; break; case 's': ret = Math.random(); break; case 'r': ret = Math.random() * 6; break; case 'fnx': random = -0.5 + Math.random() * 1; ret = function (x, y) { return x + 0.5 * random - 1.7; }; break; case 'fny': random = 1.5 + Math.random() * 0.7
            ret = function (x, y) { return y + random; }; break; case 'fnr': random = Math.random() * 0.03; ret = function (r) { return r + random; }; break;
    }
    return ret;
}
function startSakura() {
    requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame; var canvas = document.createElement('canvas'), cxt; staticx = true; canvas.height = window.innerHeight; canvas.width = window.innerWidth; canvas.setAttribute('style', 'position: fixed;left: 0;top: 0;pointer-events: none;'); canvas.setAttribute('id', 'canvas_sakura'); document.getElementsByTagName('body')[0].appendChild(canvas); cxt = canvas.getContext('2d'); var sakuraList = new SakuraList(); for (var i = 0; i < 50; i++) { var sakura, randomX, randomY, randomS, randomR, randomFnx, randomFny; randomX = getRandom('x'); randomY = getRandom('y'); randomR = getRandom('r'); randomS = getRandom('s'); randomFnx = getRandom('fnx'); randomFny = getRandom('fny'); randomFnR = getRandom('fnr'); sakura = new Sakura(randomX, randomY, randomS, randomR, { x: randomFnx, y: randomFny, r: randomFnR }); sakura.draw(cxt); sakuraList.push(sakura); }
    stop = requestAnimationFrame(function () { cxt.clearRect(0, 0, canvas.width, canvas.height); sakuraList.update(); sakuraList.draw(cxt); stop = requestAnimationFrame(arguments.callee); })
}
window.onresize = function () { var canvasSnow = document.getElementById('canvas_snow'); }
img.onload = function () { startSakura(); }
function stopp() { if (staticx) { var child = document.getElementById("canvas_sakura"); child.parentNode.removeChild(child); window.cancelAnimationFrame(stop); staticx = false; } else { startSakura(); } }
